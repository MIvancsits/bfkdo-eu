@page "/evaluator/station/{Id:int}"
@using Common.Enums;
@using Common.Model;
@inject NavigationManager NavigationManager

<MudStack Spacing="4">
    <MudStack Row Justify="Justify.Center" AlignItems="AlignItems.Center" Class="my-4" Spacing="4">
        <h1 class="m-0" aria-label="Testbezeichnung">Deine Station: <br> @_stationName</h1>
        <MudButton aria-label="Bearbeiten" 
            Color="Color.Primary" 
            Variant="Variant.Filled" 
            Style="border-radius: 20px; padding-left:20px; padding-right:20px;"
                   OnClick="() => NavigationManager.NavigateTo(_home)">
            Station wechseln
        </MudButton>
    </MudStack>
    <MudStack>
        <MudButton Color="Color.Primary"
                   Variant="Variant.Filled"
                   Style="border-radius: 20px; padding-left:20px; padding-right:20px;"
                   OnClick="() => CloseStation()">
            Station abschließen
        </MudButton>

    </MudStack>
</MudStack>
    <hr />

    <MudDataGrid Items="@_data" T="ModelEvaluationSet">
    <Columns>
        <TemplateColumn Filterable="false" CellStyle="width:20px" HeaderStyle="width:20px">
            <CellTemplate>
                <MudStack Row>
                    @{
                        var data = context.Item;
                    }
                    <MudIcon Style="border:3px solid black; border-radius:50%" Icon="@Icons.Material.Filled.Person" Title="Personen Icon" />
                    <h5>@data.ParticipantName</h5>
                    <h6>@data.SybosId</h6>
                    <h6>@data.Branch</h6>
                    <h6>@data.GradeId</h6>

                    <MudButton Color="Color.Success"
                               Variant="Variant.Filled"
                               Disabled="@(data.Grade == EnumEvaluation.Passed)"
                               OnClick="async () => await Grade(data.GradeId, EnumEvaluation.Passed)">Bestanden</MudButton>

                    <MudButton Color="Color.Error"
                               Variant="Variant.Filled"
                               Disabled="@(data.Grade == EnumEvaluation.Failed)"
                               OnClick="async () => await Grade(data.GradeId, EnumEvaluation.Failed)">Nicht bestanden</MudButton>
                </MudStack>
            </CellTemplate>
        </TemplateColumn>
    </Columns>
</MudDataGrid>

@code {
    private static readonly string _home = "/evaluator/dashboard";
}